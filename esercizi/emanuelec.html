
<html>     <!-- Questo è un commento html -->
<head>
	<title>boilerplate</title>
	<link rel="stylesheet" href="./../css/style.css">
</head>
<body>
	<h1 id="titolo_principale">boilerplate</h1>
	<p>Se usi chrome apri la finestra developer tools (..., altri strumenti, strumenti per sviluppatori).</p>
	<p>Per vedere i console.log inseriti in javascript di esempio (mostrare il tab console).</p>

			<label for="story">JSON:</label>

			<textarea id="story" name="story" rows="5" placeholder="Inserisci qui l'array JSON" cols="33" ></textarea>

			<button id  = "analizza"> ANALIZZA </button>
			<button id  = "pulisci"> PULISCI </button>

			<div id = "lista"></div>



	<script>

		"use strict";
					// Questo è il commento di una linea.

					/* Esercizio:
					1. DONE Creare un textarea e dargli un ID
					2. DONE Aggiungere un bottone che chiamiamo "ANALIZZA"
					3. DONE Alla pressione di analizza leggere il contenuto della textarea
					4.1 DONE Se il contenuto della textarea è un array scritto in Json aggiungere nel Dom (in Div)
					tanti paragrafi contenenti le diverse stringhe nell'array.
					Esempio: ["Pippo","Pluto","Paperino"]
					4.2 DONE ATTENZIONE: Se la parse va male la dobbiamo trattare con un (try-catch)
					4.3 DONE Testare quello che abbiamo scritto sia un array
					5.Aggiungere anche un bottone "PULISCI" che svuota la textarea e butta via tutti i 
					paragrafi precedentemente creati. 
					/* Questo è
					commento di 
					blocco*/
					
					
					function click_analizza (event) {
			event.stopPropagation();
			
							//alert("click_analizza");
							let textareavalue = document.getElementById("story").value;
							try{
							
									let mioJson = JSON.parse (textareavalue);
									if (Array.isArray(mioJson)) {
											
											//alert ("E' un array");
											mioJson.forEach(function(v, k, p){
													const node = document.createElement("p");

													// Create a text node:
													const textnode = document.createTextNode(v);

													// Append the text node to the "p" node:
													node.appendChild(textnode);

													// Append the "p" node to the div id = "lista":
													document.getElementById("lista").appendChild(node);

											})

									} else {
											alert ("Non è un array");
									}
							} catch (errore) {
									alert (errore);
							}
					}
					function click_pulisci (event) {
							//alert ("click_pulisci");
							event.stopPropagation();
							
							// Devo pulire la textarea
							document.getElementById("story").value = ""; 

							// TODO Buttare via tutti i paragrafi precedentemente creati
							document.getElementById("lista").innerHTML = "";

					} 

		window.addEventListener(
			'DOMContentLoaded', 
			function(event){
				let bottone_analizza = document.getElementById("analizza");
				bottone_analizza.addEventListener("click",click_analizza);

				let bottone_pulisci = document.getElementById("pulisci");
				bottone_pulisci.addEventListener("click",click_pulisci);

			}
		);


	</script>

	<h2 id="titolo_2">Output del programma</h2>
	<div id="output_codice"></div>

</body>

</html>